---
title: 线上gc问题排查方案
date: 2021-03-31 20:52:17
tags:
- jvm
- gc
- 线上问题
- fullgc
categories:
- gc
---

> 背景：线上es节点出现fullgc，导致整个查询不可用；因为es节点的堆内存非常大，通过dump的方式拿到的文件有几十个G，本身的dump过程也是非常慢的，所以需要采用一些及时的命令去分析出现fullgc的时候的堆内存中对象的情况，比如说jvm的命令、arthas等。

- segment太多，定时需要merge
- 索引的查询qps，是不是某个索引的查询量非常大
- 索引的删除文档数量，删除的文档，如果没有merge的情况下，删除的数据也会占用磁盘和内存
- 别名下的索引太多，是不是也会影响查询性能