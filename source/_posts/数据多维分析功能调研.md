---
title: 数据多维分析功能调研
date: 2021-07-08 16:57:33
categories:
- 数据分析
tags:
- 数据分析
- 多维分析
- 调研
---

多维分析的重点功能：

- 下钻分析

# 下钻分析

## 魔数的下钻分析

- 写好sql：`select date_scale,bu_id,catering_pay_amt,catering_pay_amt_frozen_meat from kldp_data_stat.app_mobile_dashboard_core_with3p_type where date_scale=20210707 and bu_id>0 limit 100`
- sql中的粒度是到bu_id，那么下钻的场景可以这样：data_scale列添加下钻功能，下钻之后，展示这一天下每个bu_id的数据

魔数的实现方式：

- 基于配置的sql，查询出sql中最细粒度的数据，外层的是魔数给聚合过的
- 点击下钻的时候，查询的是我们的sql直接出来的数据

这种方式的缺点：

- 如果明细数据量很大的话，查询到魔数那边在内存中做计算，服务端压力会很大
- 正常下钻也是要分页的，但是外层的汇总不能用分页之后的结果聚合，需要全量的结果聚合

### 对比商品多维分析的下钻

- 多维分析的下钻数据量大，所以不能采用上面魔数的方案
- 汇总就是走汇总的查询sql，明细是重新构建明细的查询sql，不存在内存中做聚合的情况

